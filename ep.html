<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>StarShield 4 : Constantinople — Epilogue</title>

<style>
:root{
  --text:#f4f8ff;
  --accent:#4af2c5;
  --danger:#ff4b81;
  --gold:#ffd166;
  --panelA: rgba(8,12,34,.92);
  --panelB: rgba(6,8,24,.92);
}
*{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,-apple-system,"Segoe UI",sans-serif}
html,body{height:100%}
body{
  background: radial-gradient(circle at 18% 12%, #1b1f58 0%, #07001b 45%, #03000c 100%);
  color:var(--text);
  overflow:hidden;
}

#stars{position:fixed;inset:0;z-index:0}
.vignette{position:fixed;inset:-20%;z-index:1;pointer-events:none;
  background:radial-gradient(circle at 50% 30%, transparent 35%, rgba(0,0,0,.9) 100%);
}
.scan{position:fixed;inset:0;z-index:2;opacity:.08;pointer-events:none;
  background:repeating-linear-gradient(to bottom, rgba(255,255,255,.15) 0 1px, transparent 1px 3px);
}

.wrap{position:relative;z-index:3;height:100%;display:flex;align-items:center;justify-content:center;padding:18px}
.card{
  width:min(980px,100%);
  background:linear-gradient(180deg,var(--panelA),var(--panelB));
  border-radius:22px;
  box-shadow:0 18px 60px rgba(0,0,0,.6);
  overflow:hidden;
  animation:cardIn .9s ease forwards;
}
@keyframes cardIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:none}}

.topbar{
  padding:14px 18px;
  display:flex;justify-content:space-between;align-items:center;
  background:rgba(10,14,40,.6);
}
.badge{font-size:12px;letter-spacing:.18em;text-transform:uppercase}
.dot{width:8px;height:8px;border-radius:50%;background:var(--accent);display:inline-block;margin-right:8px}

.content{padding:18px;display:grid;grid-template-columns:1.1fr .9fr;gap:18px}
@media(max-width:860px){.content{grid-template-columns:1fr}}

.title{font-size:32px}
.subtitle{margin-top:6px;color:#a6b0ff;font-size:14px;text-transform:uppercase}

.panel{
  margin-top:14px;
  border-radius:18px;
  background:rgba(5,0,20,.3);
  padding:14px;
}
.panel h3{font-size:12px;letter-spacing:.18em;text-transform:uppercase;margin-bottom:10px}

.typebox{
  font-size:15px;
  line-height:1.75;
  white-space:pre-wrap;
  min-height:180px;
}
.cursor{color:var(--accent);animation:blink 1s steps(2,end) infinite}
@keyframes blink{50%{opacity:0}}

.meta{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
.chip{
  font-size:12px;padding:8px 10px;border-radius:999px;
  background:rgba(166,176,255,.1);
}
.chip b{color:var(--gold)}

.visual{
  border-radius:18px;
  min-height:320px;
  background:
    linear-gradient(to top, rgba(0,0,0,.85), rgba(0,0,0,.15) 60%),
    url("Gemini_Generated_Image_k97l0ck97l0ck97l.png") center/cover no-repeat;
  position:relative;
}
.caption{
  position:absolute;left:14px;right:14px;bottom:12px;
  font-size:13px;line-height:1.5;
}

.actions{
  padding:14px 18px;
  display:flex;justify-content:space-between;align-items:center;
  background:rgba(10,14,40,.4);
}
.hint{font-size:13px;color:#a6b0ff}
.btn{
  padding:10px 14px;border-radius:14px;
  background:linear-gradient(180deg,var(--accent),#2fcaa1);
  color:#050014;text-decoration:none;font-weight:700;
}

.fadeout{position:fixed;inset:0;background:#000;opacity:0;pointer-events:none;transition:.6s}
.fadeout.on{opacity:1;pointer-events:auto}
</style>
</head>

<body>
<canvas id="stars"></canvas>
<div class="vignette"></div>
<div class="scan"></div>
<div class="fadeout" id="fade"></div>

<div class="wrap">
  <div class="card">
    <div class="topbar">
      <div class="badge"><span class="dot"></span>EPILOGUE · FINAL TRANSMISSION</div>
      <div>MVBDH-1927495 · CONSTANTINOPLE</div>
    </div>

    <div class="content">
      <div>
        <div class="title">콘스탄티노플의 <span style="color:var(--danger)">교황</span>은 자살했다</div>
        <div class="subtitle">Confession · Termination</div>

        <div class="panel">
          <h3>Last Confession</h3>
          <div class="typebox" id="type"></div><span class="cursor">▍</span>
          <div class="meta">
            <div class="chip"><b>상태</b> 요새 붕괴</div>
            <div class="chip"><b>군체</b> 통제 상실</div>
            <div class="chip"><b>의도</b> 종료</div>
          </div>
        </div>
      </div>

      <div class="visual">
        <div class="caption">
          <b>Constantinople Core</b><br>
          그는 승리를 말하지 않았다.<br>
          오직 “끝낸다”고만 말했다.
        </div>
      </div>
    </div>

    <div class="actions">
      <div class="hint">ENTER를 누르면 종료합니다</div>
      <a class="btn" href="index.html" onclick="return navWithFade(event,this.href)">종료</a>
    </div>
  </div>
</div>

<script>
/* starfield */
const c=document.getElementById('stars'),ctx=c.getContext('2d');
let W,H,DPR=1,stars=[];
function resize(){
  DPR=Math.max(1,devicePixelRatio||1);
  W=innerWidth;H=innerHeight;
  c.width=W*DPR;c.height=H*DPR;
  c.style.width=W+'px';c.style.height=H+'px';
  ctx.setTransform(DPR,0,0,DPR,0,0);
  stars=[...Array(300)].map(()=>({x:Math.random()*W,y:Math.random()*H,r:Math.random()*1.5+.3,v:Math.random()*.2+.05}));
}
addEventListener('resize',resize);resize();
(function loop(){
  ctx.clearRect(0,0,W,H);
  for(const s of stars){
    s.y+=s.v;if(s.y>H)s.y=0;
    ctx.beginPath();ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
    ctx.fillStyle="#fff";ctx.fill();
  }
  requestAnimationFrame(loop);
})();

/* typewriter — FIXED */
const lines=[
"[내부 기록] 콘스탄티노플 중앙 성소 — 최종 자백",
"",
"나는 ‘교황’이라 불렸다.",
"나는 사람들에게 약속했다. 우리에게는 다음 단계가 있다고.",
"",
"그러나 진화는 명령을 듣지 않았다.",
"군체는 스스로 규칙을 만들었고,",
"우리는 그 규칙에 신의 이름을 붙였다.",
"",
"지금 요새는 무너지고 있다.",
"전선은 성소까지 도달했다.",
"",
"나는 더 이상 변명하지 않는다.",
"이 행성에서 시작된 모든 일을, 여기서 끝낸다.",
"",
"콘스탄티노플의 핵을 정지한다.",
"군체 네트워크를 차단한다.",
"",
"내가 만든 것들과 함께—",
"나도 사라진다.",
"",
"권총을 들었다"
];

const el=document.getElementById('type');
const text=lines.join("\n");
let i=0;
(function type(){
  el.textContent=text.slice(0,i++);
  if(i<text.length)setTimeout(type,text[i]==="\n"?18:22);
})();

/* fade */
const fade=document.getElementById('fade');
function navWithFade(e,href){
  e.preventDefault();fade.classList.add('on');
  setTimeout(()=>location.href=href,650);
}
addEventListener('keydown',e=>{if(e.key==="Enter")navWithFade(e,"index.html")});
</script>
</body>
</html>
